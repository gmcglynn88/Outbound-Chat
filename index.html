<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dummy Interaction Creator</title>
  <!-- [Previous styles remain the same] -->
</head>
<body>
  <!-- [Previous HTML structure remains the same] -->

  <script>
    // Configuration
    const clientId = '96d0dde8-a96f-44fb-b039-5e578a1e78b3';
    const proxyUrl = 'https://cors-anywhere.herokuapp.com/'; // CORS proxy
    const authUrl = `${proxyUrl}https://login.mypurecloud.ie/oauth/token`;
    const apiBaseUrl = 'https://api.mypurecloud.ie/api/v2';

    // Global variables
    let token = '';
    let queues = [];
    let users = [];

    // [Previous DOM elements and event listeners remain the same]

    async function authenticate() {
      try {
        // Get OAuth token using client credentials
        const authString = `${clientId}:${clientSecret}`;
        const encodedAuth = btoa(authString);
        
        const response = await fetch(authUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Authorization': `Basic ${encodedAuth}`,
            'X-Requested-With': 'XMLHttpRequest' // Required by some CORS proxies
          },
          body: 'grant_type=client_credentials',
          mode: 'cors' // Ensure CORS mode is enabled
        });

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`HTTP ${response.status}: ${errorText}`);
        }

        const data = await response.json();
        token = data.access_token;
        authStatus.textContent = 'Authentication successful!';
        authStatus.className = 'success';
      } catch (error) {
        console.error('Authentication error:', error);
        throw new Error(`Could not authenticate with Genesys: ${error.message}`);
      }
    }

    // [Rest of the code remains the same]
  </script>
</body>
</html>
